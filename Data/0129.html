<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>[CF-metadata] Encoding Errors on variables in CF from Stephens, A on 2003-04-03 (Archive of CF discussions from 2002 to 2019 on the cf-metadata mailing list)</title>
<meta name="Author" content="Stephens, A (A.Stephens)" />
<meta name="Subject" content="[CF-metadata] Encoding Errors on variables in CF" />
<meta name="Date" content="2003-04-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<a style="text-decoration:none" href="./0128.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0130.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a><h1>[CF-metadata] Encoding Errors on variables in CF</h1>
<!-- received="Thu Apr  3 00:46:57 2003" -->
<!-- isoreceived="20030402234657" -->
<!-- sent="Thu, 3 Apr 2003 08:46:57 +0100 " -->
<!-- isosent="20030403074657" -->
<!-- name="Stephens, A" -->
<!-- email="A.Stephens" -->
<!-- subject="[CF-metadata] Encoding Errors on variables in CF" -->
<!-- id="49F73BEED865D3119F8700902773C9F901B3D1DD_at_exchange09.rl.ac.uk" -->
<!-- charset="US-ASCII" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start129" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="#options2">top</a>, <a href="#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="./0130.html" accesskey="d" title="Brian Eaton: &quot;[CF-metadata] Encoding Errors on variables in CF&quot;">Next message</a> ]
[ <a href="./0128.html" title="Jonathan Gregory: &quot;[CF-metadata] staggered grids&quot;">Previous message</a> ]
<!-- unextthread="start" -->
[ <a href="./0130.html" accesskey="t" title="Brian Eaton: &quot;[CF-metadata] Encoding Errors on variables in CF&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg129" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg129" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg129" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg129" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Stephens, A &lt;<a href="mailto:A.Stephens?Subject=Re%3A%20%5BCF-metadata%5D%20Encoding%20Errors%20on%20variables%20in%20CF">A.Stephens</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Thu, 3 Apr 2003 08:46:57 +0100 </span><br />
</address>
<br />
Dear Jonathan,
<br />
<br />Firstly, having digested your message below, I am beginning to get an idea
<br />
of just what a mammoth task you have taken on in trying to put together the
<br />
CF Convention.
<br />
<br />Here are my thoughts on what you have suggested.
<br />
<br />- I agree with the notion that linking variables opens a can of worms in
<br />
terms of linking files and the variables getting separated at some point in
<br />
the future.
<br />
<br /><em class="quotelev2">&gt;&gt;By the way, how does the detection limit differ from the standard error?
</em><br />
<br />- The limit of detection takes into account a background or blank reading
<br />
(i.e. baseline noise) and the mean of these derived from instrumental
<br />
readings. 
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x(L) = x(bi) + k.s(bi)
<br />
<br />where x(bi) - is the mean of the blank measures, s(bi) is the standard
<br />
deviation
<br />
of the blank measures, and k is a numerical factor chosen according to the
<br />
confidence level desired. For example, k could be 3 for &gt; 99.5% Confidence
<br />
limit.
<br />
<br />Whereas, standard error is (usually) defined as the standard deviation
<br />
divided by the square root of the number of samples:
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S.E.=Standard deviation / (n)^0.5
<br />
<br />- In your 'intent' examples you have used the same standard_name for the
<br />
variable and the associated error variable. I can see this causing problems
<br />
for software that is only looking for standard_names to identify variables
<br />
so I would not recommend this route. And I am concerned that it will be
<br />
difficult to define all the possibilities for uncertainty/error types and
<br />
that you will end up with a separate error table like the standard name
<br />
table that continues to grow. Because of this I find I am still favouring
<br />
the more simplistic &quot;error_on_&quot; or &quot;uncertainty_on_&quot; prefix on the
<br />
standard_name with the information held in the comment field regarding the
<br />
actual content.
<br />
<br />I think my key concern here is that people report errors in so many ways,
<br />
it's preferable to give a generic method of describing them which avoids you
<br />
having to try and catch them all in advance.
<br />
<br />- However, addressing some of your other points:
<br />
<br /><em class="quotelev3">&gt;&gt;&gt;    no2_error_limit:intent = &quot;standard_error&quot; ;
</em><br />
<em class="quotelev3">&gt;&gt;&gt;    no2_error_limit:error_multiplier=2.0;
</em><br />
<br />I think this is a sensible option if intent is used in the above way.
<br />
<br />- In terms of error flags, I would favour the second version where you
<br />
include the 'flag_values and flag_meanings pairing:
<br />
<br /><em class="quotelev3">&gt;&gt;&gt;    current_speed_qc:flag_values=0b, 1b, 2b;
</em><br />
<em class="quotelev3">&gt;&gt;&gt;    current_speed_qc:flag_meanings=&quot;quality_good sensor_nonfunctional &quot;
</em><br />
<em class="quotelev3">&gt;&gt;&gt;      &quot;outside_valid_range&quot;;
</em><br />
<br />- So, overall, my personal opinion is that we are in danger of seriously
<br />
complicating things by adding a whole load of new possibilites. But equally
<br />
my suggested route is not ideal. I'm still thinking about it.
<br />
<br />Ag
<br />
<br />-----Original Message-----
<br />
From: Jonathan Gregory [mailto:jonathan.gregory at metoffice.com]
<br />
Sent: 30 March 2003 22:58
<br />
To: cf-metadata at cgd.ucar.edu
<br />
Cc: jonathan.gregory at metoffice.com
<br />
Subject: [CF-metadata] Encoding Errors on variables in CF
<br />
<br /><br />Dear All
<br />
<br />I agree with Brian that if we include prefixes like &quot;error_on&quot; in the
<br />
standard
<br />
name, we could end up with a tremendous number of standard names - it is
<br />
quite
<br />
possible that every data variable could have a statistically derived
<br />
standard
<br />
error, for instance. As Brian says, that is a reason why we record
<br />
statistical
<br />
processing like &quot;mean&quot; and &quot;standard deviation&quot; in cell_methods rather than
<br />
in
<br />
the standard name. Therefore I retract my suggestion we should distinguish
<br />
these error quantities through the standard name.
<br />
<br />The idea of making links between variables depends on the assumption that
<br />
the
<br />
error variable can only exist in the company of the data variable it belongs
<br />
to, because the links are the identification of its role. This idea is like
<br />
bounds on coordinate variables, which are subsidiary to the coordinate
<br />
variables and have no attributes of their own. A problem with this, in my
<br />
view,
<br />
is that we might choose to store the error variables apart from the
<br />
variables
<br />
they belong to. I have come across situations, for instance, in which
<br />
separate
<br />
files contained corresponding sets of variables, one file for the data
<br />
values,
<br />
one for the measurement uncertainty, one for the data quality flags, etc.
<br />
Links between files would be require encoding filenames in files, which
<br />
feels
<br />
unsafe to me. Moreover, since the link is on the main variable, if you look
<br />
at
<br />
the standard error variable, for instance, you can't tell what its purpose
<br />
is.
<br />
You can't even tell what it belongs to unless it has a link pointing back to
<br />
the main variable, as in Ag's example. Creating reverse links doubles the
<br />
work
<br />
and the potential for things to go wrong.
<br />
<br />I tend to feel it is more reliable to identify a quantity by labelling it,
<br />
rather than by labelling something else to point to it. That's why I
<br />
proposed
<br />
modifying the standard name. However, in view of the problem with that,
<br />
perhaps
<br />
a better idea would be to put the extra information into a separate
<br />
attribute
<br />
whose purpose is to indicate how this data variable affects the
<br />
interpretation
<br />
of another data variable. For the sake of argument, call this attribute
<br />
&quot;intent&quot;. For example:
<br />
<br />&nbsp;&nbsp;float no2(time);
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2:standard_name = &quot;nitrogen_dioxide_volume_mixing_ratio&quot; ; ###
<br />
UNOFFICIAL
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2:units = &quot;1-e9&quot; ;
<br />
&nbsp;&nbsp;float no2_error_limit(time) ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2_error_limit:standard_name = &quot;nitrogen_dioxide_volume_mixing_ratio&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2_error_limit:units = &quot;1-e9&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2_error_limit:intent = &quot;standard_error&quot; ;
<br />
<br />To find the standard error, you search the file, or files, for a data
<br />
variable
<br />
with the same standard name (and other metadata, if necessary, to
<br />
distinguish)
<br />
as the main variable and the appropriate intent attribute. This method means
<br />
the variables are all identifying themselves and carry around their own
<br />
metadata. There can be more than one kind of error variable for each data
<br />
variable - this presents no problem. By the way, how does the detection
<br />
limit
<br />
differ from the standard error?
<br />
<br />The possible values of the intent attribute would be standardised and
<br />
defined.
<br />
This is much like cell_methods. As with cell_methods, they might modify the
<br />
units implied by the standard name. For instance, a percentage error and a
<br />
data
<br />
quality flag are dimensionless. Standardisation is necessary so that you
<br />
know
<br />
what you've got. In Ag's example, it was a 2 * standard error that was
<br />
supplied. It is important to know whether it's once, twice, three times
<br />
s.e.,
<br />
the width of the 5-95% confidence interval, or whatever. A generalisation of
<br />
the above is needed. We could define intents such as &quot;2_standard_errors&quot; or
<br />
we
<br />
could have a further attribute e.g.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;no2_error_limit:intent = &quot;standard_error&quot; ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;no2_error_limit:error_multiplier=2.0;
<br />
<br />Another intent could be &quot;data_quality&quot;, the example given by John Evans.
<br />
This
<br />
raises the interesting issue of how to describe what the possible values
<br />
are.
<br />
John has recorded the values in special attributes e.g.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:standard_name=&quot;sea_water_speed&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:intent=&quot;data_quality&quot;;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:quality_good = 0b ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:sensor_nonfunctional = 1b ;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:outside_valid_range = 2b ;
<br />
<br />This is nice because it makes the file self-describing, but is perhaps
<br />
awkward
<br />
for translating from the values to their meanings? Also it would lead to
<br />
proliferation of different kinds of attribute.
<br />
<br />I guess it would be hopeless to try to define standard values or names for
<br />
the
<br />
quality states, so the best we can do is to provide a standardised way of
<br />
tabulating what the quality states mean. What about gathering John's
<br />
attributes
<br />
together in this kind of way:
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:flag_values=0b, 1b, 2b;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;current_speed_qc:flag_meanings=&quot;quality_good sensor_nonfunctional &quot;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outside_valid_range&quot;;
<br />
<br />where the values and their meanings are associated one-to-one? This would be
<br />
equally easy to use for translations either way, and would define just two
<br />
attributes which could be standardised, even though their values could not
<br />
be.
<br />
<br />Best wishes
<br />
<br />Jonathan
<br />
_______________________________________________
<br />
CF-metadata mailing list
<br />
CF-metadata at cgd.ucar.edu
<br />
<a href="http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata">http://www.cgd.ucar.edu/mailman/listinfo/cf-metadata</a>
<br />
<span id="received"><dfn>Received on</dfn> Thu Apr 03 2003 - 00:46:57 BST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start129">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="./0130.html" title="Next message in the list">Brian Eaton: "[CF-metadata] Encoding Errors on variables in CF"</a></li>
<li><dfn>Previous message</dfn>: <a href="./0128.html" title="Previous message in the list">Jonathan Gregory: "[CF-metadata] staggered grids"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="./0130.html" title="Next message in this discussion thread">Brian Eaton: "[CF-metadata] Encoding Errors on variables in CF"</a></li>
<li><a name="replies" id="replies"></a>
<dfn>Reply</dfn>: <a href="./0130.html" title="Message sent in reply to this message">Brian Eaton: "[CF-metadata] Encoding Errors on variables in CF"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="index.html#msg129" title="Contemporary messages by date">by date</a> ] [ <a href="thread.html#msg129" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg129" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg129" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Tue Sep 13 2022 - 23:02:40 BST
</em></small></p>
</body>
<p><a style="text-decoration:none" href="./0128.html"><img src="./red-arrow-left.jpg" width="50" alt="&lArr;"></a> <a style="text-decoration:none" href="./0130.html"><img src="./red-arrow-right.jpg" width="50" alt="&rArr;"></a></html>
